{
  "version": 3,
  "sources": ["../../backend/controllers/director.controller.js"],
  "sourcesContent": ["//Importamos modelo Mongo DB para operaciones CRUD\r\nconst directorModel = require(\"../models/director\");\r\n\r\n//m\u00E9todo para Obtener uno o todos los directores\r\nexports._getDirectores = async (req, res) => {\r\n  try {\r\n    console.log(req.params);\r\n    let newDirector = new directorModel();\r\n    const id = req.params.id;\r\n\r\n    //Si llega parametro id busca por activo y id, sino, busca solo los activos\r\n    newDirector = await directorModel.find(\r\n      id ? { activo: true, _id: id } : { activo: true }\r\n    );\r\n\r\n    //Si encontro datos, los retorna, sino, retorna mensaje de no se encotraron\r\n    res.json(\r\n      newDirector.length > 0\r\n        ? newDirector\r\n        : [{ msg: \"No se encontraron Resultados\" }]\r\n    );\r\n  } catch (error) {\r\n    res.json(error);\r\n  }\r\n};\r\n\r\n//m\u00E9todo para crear nuevo director\r\nexports._createDirector = async (req, res) => {\r\n  try {\r\n    console.log(req.body);\r\n    const cedula = req.body.cedula;\r\n    const nombre = req.body.nombre;\r\n    const activo = req.body.activo;\r\n    const fechaCreacion = req.body.fechaCreacion;\r\n    const fechaActualizacion = req.body.fechaActualizacion;\r\n/*\r\n    //Validamos si ya existe genero en BD\r\n    const getDirector = await directorModel.find({\r\n      activo: true,\r\n      nombre: nombre,\r\n    });\r\n    console.log(\"getDirector \", getDirector.length);\r\n    if (getDirector.length > 0) {\r\n      res.json({\r\n        msg: `no fue posible crear El Director, ${nombre} ya existe en la Base de Datos`,\r\n      });\r\n      return;\r\n    } \r\n*/\r\n      // Definimos objeto Modelo Mongo DB director\r\n      const newdirector = new directorModel({\r\n        cedula,\r\n        nombre,\r\n        activo,\r\n        fechaCreacion,\r\n        fechaActualizacion,\r\n      });\r\n\r\n      // Guardamos registro en BD Mongo\r\n      await newdirector.save();\r\n      console.log(newdirector);\r\n      res.json({\r\n        msg: `El director ${nombre} se cre\u00F3 correctamente, el id generado es ${newdirector._id}`,\r\n      });\r\n    \r\n  } catch (error) {\r\n    res.json(error);\r\n  }\r\n};\r\n\r\n//M\u00E9todo para actualizar registro, se reciben dos parametros id a cambiar y nueva data\r\nexports._updateDirector = async (req, res) => {\r\n  try {\r\n    const _id = req.params.id;\r\n    const nombre = req.body.nombre;\r\n    const data = req.body;\r\n\r\n    //valida si trae parametro id y data para realizar la actualizacion\r\n    if (_id && data) {\r\n      await directorModel.findByIdAndUpdate(_id, data);\r\n      res.json({\r\n        msg: `El director ${nombre} (${_id}) se actualiz\u00F3 correctamente`,\r\n      });\r\n    } else {\r\n      res.json({\r\n        msg: `No fue posible realizar la actualizaci\u00F3n del director, favor validar datos enviados e intente nuevamente`,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    res.json(error);\r\n  }\r\n};\r\n\r\n//M\u00E9todo para eliminar registro indicado\r\nexports._deleteDirector = async (req, res) => {\r\n  try {\r\n    const _id = req.params.id;\r\n\r\n    //Eliminamos registro definitivamente de la base de datos\r\n    await directorModel.findByIdAndDelete(_id);\r\n\r\n    //Actualizamos registro an activo fale para conservar registro\r\n    // await directorModel.findByIdAndUpdate(_id, { activo: false });\r\n\r\n    // retornamos mensaje de exito\r\n    res.status(200).json({ msg: `El director ${_id} fue eliminado con \u00E9xito` });\r\n  } catch (error) {\r\n    res.json(error);\r\n  }\r\n};\r\n"],
  "mappings": ";AACA,MAAM,gBAAgB,QAAQ,oBAAoB;AAGlD,QAAQ,iBAAiB,OAAO,KAAK,QAAQ;AAC3C,MAAI;AACF,YAAQ,IAAI,IAAI,MAAM;AACtB,QAAI,cAAc,IAAI,cAAc;AACpC,UAAM,KAAK,IAAI,OAAO;AAGtB,kBAAc,MAAM,cAAc;AAAA,MAChC,KAAK,EAAE,QAAQ,MAAM,KAAK,GAAG,IAAI,EAAE,QAAQ,KAAK;AAAA,IAClD;AAGA,QAAI;AAAA,MACF,YAAY,SAAS,IACjB,cACA,CAAC,EAAE,KAAK,+BAA+B,CAAC;AAAA,IAC9C;AAAA,EACF,SAAS,OAAO;AACd,QAAI,KAAK,KAAK;AAAA,EAChB;AACF;AAGA,QAAQ,kBAAkB,OAAO,KAAK,QAAQ;AAC5C,MAAI;AACF,YAAQ,IAAI,IAAI,IAAI;AACpB,UAAM,SAAS,IAAI,KAAK;AACxB,UAAM,SAAS,IAAI,KAAK;AACxB,UAAM,SAAS,IAAI,KAAK;AACxB,UAAM,gBAAgB,IAAI,KAAK;AAC/B,UAAM,qBAAqB,IAAI,KAAK;AAgBlC,UAAM,cAAc,IAAI,cAAc;AAAA,MACpC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAGD,UAAM,YAAY,KAAK;AACvB,YAAQ,IAAI,WAAW;AACvB,QAAI,KAAK;AAAA,MACP,KAAK,eAAe,MAAM,gDAA6C,YAAY,GAAG;AAAA,IACxF,CAAC;AAAA,EAEL,SAAS,OAAO;AACd,QAAI,KAAK,KAAK;AAAA,EAChB;AACF;AAGA,QAAQ,kBAAkB,OAAO,KAAK,QAAQ;AAC5C,MAAI;AACF,UAAM,MAAM,IAAI,OAAO;AACvB,UAAM,SAAS,IAAI,KAAK;AACxB,UAAM,OAAO,IAAI;AAGjB,QAAI,OAAO,MAAM;AACf,YAAM,cAAc,kBAAkB,KAAK,IAAI;AAC/C,UAAI,KAAK;AAAA,QACP,KAAK,eAAe,MAAM,KAAK,GAAG;AAAA,MACpC,CAAC;AAAA,IACH,OAAO;AACL,UAAI,KAAK;AAAA,QACP,KAAK;AAAA,MACP,CAAC;AAAA,IACH;AAAA,EACF,SAAS,OAAO;AACd,QAAI,KAAK,KAAK;AAAA,EAChB;AACF;AAGA,QAAQ,kBAAkB,OAAO,KAAK,QAAQ;AAC5C,MAAI;AACF,UAAM,MAAM,IAAI,OAAO;AAGvB,UAAM,cAAc,kBAAkB,GAAG;AAMzC,QAAI,OAAO,GAAG,EAAE,KAAK,EAAE,KAAK,eAAe,GAAG,8BAA2B,CAAC;AAAA,EAC5E,SAAS,OAAO;AACd,QAAI,KAAK,KAAK;AAAA,EAChB;AACF;",
  "names": []
}
